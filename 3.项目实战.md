#项目实战

需求：

```
数据结构：

1.每个网站的流量包数据

有效流量包及过期流量包详情，包括类型、使用详情、购买/领取时间、过期时间、类型

2.每个网站的CDN日志数据结构：

请求时间、访问域名的客户端IP、被访问域名、文件请求路径、本次访问字节数大小、省份、运营商、http返回码、referer信息、request-time、User-Agent

3.CDN日志地区编码映射表

1：华北地区、2：西北地区、3：东北地区、4：华东地区、5：华中地区、6：西南地区、7：华南地区、8：其他地区；

4.CDN日志省份编码映射表
22：北京、86：内蒙古、146：山西、1069：河北、1177：天津、119：宁夏、152：陕西、1208：甘肃、1467：青海、1468：新疆、145：黑龙江、1445：吉林,、1464：辽宁、2：福建、120：江苏、121：安徽、122：山东、1050：上海、1442：浙江、182：河南、1135：湖北、1465：江西、1466：湖南、118：贵州、153：云南、1051：重庆、1068：四川、1155：西藏、4：广东、173：广西、1441：海南、0：其他、1：港澳台、-1：海外

5. CDN日志运营商编码映射表

2：中国电信、26：中国联通、43：长城宽带、1046：中国移动、3947：中国铁通；


```
```
业务需求：
1)   用户分布统计
统计网站访客来源,可分别统计访问用户来源省份，来源ISP，并根据来源比例绘制饼状分析图。
2)   网页热点统计
统计网站访问热点的页面或文件，可分别统计热点的访问次数，访问速度和访问流量。
3)   网站引用统计
统计网站被引用链接的访问次数，及被引用链接的访问流量。
4)   访问者统计
统计详细的访问者信息，记录访问者来源IP、访问次数、访问流量、访问速度，并分析访问者来源。
5)   加速效果分析
统计来访问用户的带宽情况，并按来访者带宽比例提供柱状图。
6)   文件大小特征
统计网站对象（文件）的大小，及所占比例，提供详细的柱状分析图。
7)  观看时间分析
统计访客的访问时间，在线时长，并提供柱状的分析图，由此可基本对比出网站各栏目的受欢迎程度。
除以上外，还有浏览器分析，搜索引擎分析，操作系统分析等。


```
```
使用量统计：

1.查询最近90天内接入 CDN 的域名的使用量情况，可指定时间区间、项目、域名、地域、运营商、网络层级、时间粒度查询条件，可查询内容包括：

域名流量、带宽使用详情、峰值的查询、明细下载（支持所选时间区间5分钟细粒度明细）；
流量使用运营商、省份 Top10 查询、下载；
流量/宽带使用 Top100 查询、下载。
访问情况统计：

2.查询最近90天内接入CDN的域名的访问情况，可指定时间区间、项目、域名、地域、运营商、时间粒度查询条件，可查询内容包括：

请求数量、IP访问次数、命中率；
请求数量的运营商、省份分布 Top10 查询、下载；
域名维度访问情况 Top10 查询、下载；
域名访问状况（资源URL维度）Top100查询、下载。

3.状态码统计：
可查询最近90天内接入CDN的域名边缘节点或中间源状态码统计及分布，可指定时间区间、项目、域名、网络层级、时间粒度查询条件，可查询内容包括
2XX、3XX、4XX、5XX状态码统计图及明细下载；
状态码占比、数目情况及明细下载。


4.全网状态监控：
查询最近90天内全网时延与可用性统计数据。
```
